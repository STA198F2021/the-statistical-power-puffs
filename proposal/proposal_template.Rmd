---
title: "Project Proposal"
subtitle: "due October 11, 2021 by 11:59 PM "
author: "Mihika Rajvanshi, Bhavika Garg, Michelle Huang"
date: "10/11/2021"
output: pdf_document
---

# Load Packages

```{r load-packages, message = FALSE, warning = FALSE}
library(tidyverse) 
library(infer)
library(readxl)
library(skimr)
library(dplyr)
``` 

# Load Data
```{r load-data, message = F, cache = TRUE}
# covid1=read_excel("../data/COVIDiSTRESS_May30_First.xlsx", sheet= 1)
# covid2=read_excel("../data/COVIDiSTRESS_May30_Second.xlsx", sheet= 1)
# covid3=read_excel("../data/COVIDiSTRESS_May 30_Third.xlsx", sheet= 1)
# covid4=read_excel("../data/COVIDiSTRESS_May 30_Fourth.xlsx", sheet= 1)
# covid5=read_excel("../data/COVIDiSTRESS_May 30_Fifth.xlsx", sheet= 1)
```

```{r join-data, message = FALSE, warning = FALSE, echo = FALSE, cache = TRUE}
# covidstressdata <-covid1 %>%
#   full_join(covid2) %>%
#   full_join(covid3) %>%
#   full_join(covid4) %>%
#   full_join(covid5)

# write_csv(covidstressdata, "../data/covidstressdata.csv")
covidstressdata <- read_csv("../data/covidstressdata.csv")
```
# Introduction and Data, including Research Questions

  After two on-campus suicides in the past month, students at the University of North Carolina at Chapel Hill have spoken out about the mental health crisis that has arisen alongside the COVID-19 pandemic, comparing declining mental health to “a second pandemic”. Mental health crises so close to home highlight how COVID-19 is not merely a medical phenomenon, but also how institutional organizations failed to target socio-psychological consequences that arose from restrictions during this global health crisis (Javed et. al, 2020, Yamada et. al 2021). In particular, evidence indicates that the mental health impacts will be the greatest and longest-lasting globally in under-served populations of LMICs, emphasizing a need for a solution that identifies and addresses the social determinants of mental health during this pandemic (Kola, 2021). 
  Because of the pertinence of this issue, our team has proposed the research question: How does age, gender, and level of isolation affect global mental health outcomes during COVID-19? To explore our question, we will reference data from the COVIDiStress Global Survey focused on the psychological and behavioural impact of the coronavirus crisis from the Open Science Framework database. The collection efforts for this data spanned from March to May of 2020, and used survey forms across 179 countries. In total, the data represents 125,306 people with demographic characteristics for countries with over 200 responses who met the survey inclusion criteria (over 18 years of age providing informed consent) and accessed the online survey link over a period of 62 days. A variety of adults with varying demographics provided self-reports about the proximate psychological effects of the COVID-19 pandemic, which were translated as indicators for mental health outcomes. A wide range of variables were collected during this study, demographic data, psychological effects of COVID-19, risk taking intention, personality characteristics, loneliness levels, stress levels, levels of trust, and willingness to comply with COVID-19 regulations. More specific variables observed include experiences of distress from COVID-19 restrictions, coping mechanisms during quarantine, and availability of social support. To respond to the survey questions, participants typically supplied their answers on a 6-point scale ranging from ‘Strongly disagree’ to ‘Strongly agree,’ and added text to explain their choices (Yamada, 2021).

References

Javed, B., Sarwer, A., Soto, E. B., & Mashwani, Z. U. (2020). The coronavirus (COVID-19) 
pandemic's impact on mental health. The International journal of health planning and management, 35(5), 993–996. https://doi.org/10.1002/hpm.3008

 L. Kola, B.A. Kohrt, C. Hanlon, J.A. Naslund, S. Sikander, M. Balaji, C. Benjet, E.Y. Cheung, J. Eaton, P. Gonsalves, M. Hailemariam, N.P. Luitel, D.B. Machado, E.Misganow, O. Omigbodun, T. Roberts, T.T. Salisbury, R. Shidhaye, V. Su. (2021). COVID-19 mental health impact and responses in low-income and middle-income countries: Reimagining global mental health, Lancet Psychiatry (8) pp. 535-550, https://doi.org/10.1016/S2215-0366(21)00025-0.

Yamada, Y., Ćepulić, DB., Coll-Martín, T. et al. COVIDiSTRESS Global Survey dataset on 
psychological and behavioural consequences of the COVID-19 outbreak. Sci Data 8, 3 (2021). https://doi.org/10.1038/s41597-020-00784-9 

# Glimpse
This is the condensed glimpse because there are 154 variables. We have selected the first 13, but the full list can be found in the readme file. The data was joined via full_join. Code not shown in output file. 

```{r glimpse}
cleancovid <- subset (covidstressdata, select = -c(AD_gain, AD_loss, RecordedDate, Duration..in.seconds., UserLanguage, Dem_edu_mom, Dem_Expat, Dem_state, Dem_riskgroup, AD_check, Trust_countrymeasure))%>%
  #removed because of laTex incompatible but will use this for analysis 
  
filter(Dem_gender %in% c("Male", "Female"), answered_all == "Yes", Dem_isolation %in% c("Isolated", "Life carries on with minor changes", "Life carries on as usual"), Dem_maritalstatus %in% c("Single", "Divorced/widowed", "Married/cohabiting"), Dem_employment %in% c("Not employed", "Retired", "Full time employed", "Student", "Part time employed", "Self-employed"), Dem_dependents %in%c (0, 1, 2, 3, 4, 5, 6, 7, 8, 9))

glimpsecovid <- subset (covidstressdata, select = -c(Dem_maritalstatus:Scale_UCLA_TRI_avg))  #condensed for proposal

glimpse(glimpsecovid)
```

# Data Analysis Plan
 Our main change to the proposal resubmission was removing the t-tests and adding the more appropriate ANOVA tests for our data analysis plan. We also added more predictor variables to get a more holistic view of the data. These changes are incorporated within the following section. In order to answer our research question, our predictor variables (x) are age, gender, level of isolation, marital status, dependents, employment status, while the outcome variables (y) are the results of several measures of psychological well-being during COVID-19. We will pick the three most relevant measures in the study:  PSS10, SPS-15, and SLON-3 scales. The PSS scale measures perceived stress in an individual. SPS measures an individual’s social connectedness to others. Finally, the SLON-3 scale measures loneliness in individuals. Together, we take these three scales to represent a quantitative measure of psychological well-being. The comparison groups that will be used will be two groupings of ages, the two genders, the levels of isolation, married or single, number of dependents, and unemployed or employed. We will then consider if the relationship between our factors and the various psychological well-being scales is statistically significant in each of our cases. Because this dataset is extremely large with over 125,000 observations, we will first examine the dataset by understanding the demographics of the data (the visualizations are below). Then we will calculate the mean levels of the PSS-10, SPS-15, and SLON-3 scales in different age groups, gender, levels of isolation, marital status, dependents, employment status. We will also create sets of histograms and barplots that visualize the distribution of these scales. Finally, we will create a series of visualizations just to see the overall geographic distributions with the spatial mapping method. The statistical methods that will be useful in answering our research question would be the ANOVA test. The ANOVA test will be used because we want to find out which one of these factors has a significant effect on the measures of depression we chose. 
  We will primarily focus on age, gender, and levels of isolation as we are most interested in those three and are the factors we made visualizations for. For the age analysis, the age groups will be collapsed into children and adults. For the gender analysis, only female and male individuals will be used while those that answered NA will be discarded. Finally, for the level of isolation, we will collapse the four values of isolation into two groups of isolated or not isolated. We will compare the mean values of our three scales of psychological well-being via ANOVA tests to see which factor is most significantly correlated. 
  Our null hypothesis is that no factor has a statistically significant correlation on any scale of psychological well-being in a global population. Our alternate hypothesis for each of our tests is that age, gender, or level of isolation (or other factors) will have a more significant correlation than other factors with our various scales of psychological well-being, PSS-10, SPS-15, and SLON-3. 
In order for our hypothesized answer to be correct, the mean levels of the well-being scales must be statistically different (p-value <0.05) when comparing mean values of the PSS-10, SPS-15, or SLON-3 scales across each of our two different scenarios of three explanatory variables (age, gender, or isolation). 


```{r visual-1, warning=FALSE, echo=FALSE, fig.height = 1.5}
cleancovid %>%
  filter(Dem_gender %in% c("Male", "Female")) %>%
  ggplot(aes(x = Dem_gender, fill = Dem_gender ))+ 
  geom_bar() +
  labs(title= "Gender Distributions", 
       x= "Gender", 
       y= "Individuals", 
       fill = "Gender") 
```


```{r visual-2, warning=FALSE, echo=FALSE, fig.height = 1.5}
cleancovid %>%
  ggplot(aes(x = Dem_age)) + 
  geom_histogram(fill = "pink") + 
  labs(title= "Age Distributions", 
       x= "Age",
      y= "Individuals")
```


```{r visual-3, warning=FALSE, echo=FALSE, fig.height = 1.5}
cleancovid %>%
  filter(Dem_isolation %in% c("Isolated", "Life carries on with minor changes", "Life carries on as usual")) %>%
  ggplot(aes(x = Dem_isolation, fill = Dem_isolation)) + 
  geom_bar() + 
  labs(title= "Levels of Isolation", 
       x= "Isolation Level", 
       y= "Individuals", 
       fill = "Level of Isolation")
```

```{r filter-PSS-NA}
covidforanalysis <- subset (cleancovid, select = c(13:22)) %>%
filter(Scale_PSS10_UCLA_1 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_2 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_3 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_4 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_5 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_6 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_7 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_8 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_9 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_PSS10_UCLA_10 %in% c(1, 2, 3, 4, 5))
```


```{r explanatoryvariables-PSSmeans}
covidforanalysis$Scale_PSS10_UCLA_1 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_1))
```


```{r explanatoryvariables-PSSmeans2}
covidforanalysis$Scale_PSS10_UCLA_2 <-  as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_2))
```


```{r explanatoryvariables-PSSmeans3}
covidforanalysis$Scale_PSS10_UCLA_3 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_3))
```


```{r explanatoryvariables-PSSmeans4}
covidforanalysis$Scale_PSS10_UCLA_4 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_4))
```


```{r explanatoryvariables-PSSmeans5}
covidforanalysis$Scale_PSS10_UCLA_5 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_5))
```


```{r explanatoryvariables-PSSmeans6}
covidforanalysis$Scale_PSS10_UCLA_6 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_6))
```


```{r explanatoryvariables-PSSmeans7}
covidforanalysis$Scale_PSS10_UCLA_7 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_7))
```


```{r explanatoryvariables-PSSmeans8}
covidforanalysis$Scale_PSS10_UCLA_8 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_8))
```


```{r explanatoryvariables-PSSmeans9}
covidforanalysis$Scale_PSS10_UCLA_9 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_9))
```


```{r explanatoryvariables-PSSmeans10}
covidforanalysis$Scale_PSS10_UCLA_10 <- as.numeric(as.character(covidforanalysis$Scale_PSS10_UCLA_10))
```


```{r explanatoryvariables-PSSmeans11}
covidforanalysis <- covidforanalysis %>%
  select(Scale_PSS10_UCLA_1:Scale_PSS10_UCLA_10) %>%
  mutate(PSSmeans = rowMeans(across(where(is.numeric))))
```

```{r filter-SLON-NA}
covidforanalysis2 <- subset (cleancovid, select = c(23:25)) %>%
filter(Scale_SLON_1 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_SLON_2 %in% c(1, 2, 3, 4, 5))%>%
filter(Scale_SLON_3 %in% c(1, 2, 3, 4, 5))
```

```{r explanatoryvariables-SLONmeans}
covidforanalysis2$Scale_SLON_1 <- as.numeric(as.character(covidforanalysis2$Scale_SLON_1))
```


```{r explanatoryvariables-SLONmeans2}
covidforanalysis2$Scale_SLON_2 <- as.numeric(as.character(covidforanalysis2$Scale_SLON_2))
```


```{r explanatoryvariables-SLONmeans3}
covidforanalysis2$Scale_SLON_3 <- as.numeric(as.character(covidforanalysis2$Scale_SLON_3))
```


```{r explanatoryvariables-SLONmeans4}
covidforanalysis2 <- covidforanalysis2 %>%
  select(Scale_SLON_1: Scale_SLON_3) %>%
  mutate(SLONmeans = rowMeans(across(where(is.numeric))))
```

```{r filter-SPS-NA}
covidforanalysis3 <- subset (cleancovid, select = c(101:110)) %>%
filter(SPS_1 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_2 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_3 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_4 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_5 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_6 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_7 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_8 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_9 %in% c(1, 2, 3, 4, 5, 6))%>%
filter(SPS_10 %in% c(1, 2, 3, 4, 5, 6))
```

```{r explanatoryvariables-SPSmeans}
covidforanalysis3$SPS_1 <- as.numeric(as.character(covidforanalysis3$SPS_1))
```


```{r explanatoryvariables-SPSmeans2}
covidforanalysis3$SPS_2 <- as.numeric(as.character(covidforanalysis3$SPS_2))
```


```{r explanatoryvariables-SPSmeans3}
covidforanalysis3$SPS_3 <- as.numeric(as.character(covidforanalysis3$SPS_3))
```


```{r explanatoryvariables-SPSmeans4}
covidforanalysis3$SPS_4 <- as.numeric(as.character(covidforanalysis3$SPS_4))
```


```{r explanatoryvariables-SPSmeans5}
covidforanalysis3$SPS_5 <- as.numeric(as.character(covidforanalysis3$SPS_5))
```


```{r explanatoryvariables-SPSmeans6}
covidforanalysis3$SPS_6 <- as.numeric(as.character(covidforanalysis3$SPS_6))
```


```{r explanatoryvariables-SPSmeans7}
covidforanalysis3$SPS_7 <- as.numeric(as.character(covidforanalysis3$SPS_7))
```


```{r explanatoryvariables-SPSmeans8}
covidforanalysis3$SPS_8 <- as.numeric(as.character(covidforanalysis3$SPS_8))
```


```{r explanatoryvariables-SPSmeans9}
covidforanalysis3$SPS_9 <- as.numeric(as.character(covidforanalysis3$SPS_9))
```


```{r explanatoryvariables-SPSmeans10}
covidforanalysis3$SPS_10 <- as.numeric(as.character(covidforanalysis3$SPS_10))
```


```{r explanatoryvariables-SPSmeans11}
covidforanalysis3 <- covidforanalysis3 %>%
  select(SPS_1:SPS_10) %>%
  mutate(SPSmeans = rowMeans(across(where(is.numeric))))
```


